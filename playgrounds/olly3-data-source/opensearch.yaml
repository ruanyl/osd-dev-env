replicas: 2

image:
  repository: "opensearchproject/opensearch"
  tag: "3.4.0"
  pullPolicy: "Always"

config:
  opensearch.yml:
    opensearch.experimental.feature.transport.stream.enabled: true
    http.type: reactor-netty4-secure
    plugins:
      security:
        system_indices.enabled: false
      ml_commons:
        agent_framework_enabled: true
        index_insight_feature_enabled: true
        stream_enabled: true
        ag_ui_enabled: true

opensearchJavaOpts: "-Xms4g -Xmx4g -Dio.netty.allocator.numDirectArenas=1 -Dio.netty.noUnsafe=false -Dio.netty.tryUnsafe=true -Dio.netty.tryReflectionSetAccessible=true -Dopensearch.performanceanalyzer.enabled=false"

resources:
  requests:
    cpu: "4"
    memory: "8Gi"

extraEnvs:
  - name: OPENSEARCH_ADMIN_PASS
    value: <secret:/app/data/demo/internal_users~admin>

plugins:
  enabled: true
  removeList:
    - opensearch-skills
    - opensearch-ml
  installList:
    - https://github.com/Hailong-am/ml-commons/releases/download/3.4-snapshot/opensearch-ml-3.4.0.0-SNAPSHOT.zip
    - org.opensearch.plugin:opensearch-skills:3.4.0.0
    - https://github.com/Hailong-am/OpenSearch/releases/download/3.4.0-fix1/transport-reactor-netty4-3.4.0-SNAPSHOT.zip
    - https://github.com/PauiC/OpenSearch/releases/download/3.4.0/arrow-flight-rpc-3.4.0-SNAPSHOT.zip