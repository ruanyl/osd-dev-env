replicas: 3

image:
  repository: "opensearchstaging/opensearch"
  tag: "3.5.0"
  pullPolicy: "Always"

config:
  opensearch.yml:
    opensearch.experimental.feature.transport.stream.enabled: true
    http.type: reactor-netty4-secure
    plugins:
      security:
        system_indices.enabled: false
      ml_commons:
        agent_framework_enabled: true
        index_insight_feature_enabled: true
        stream_enabled: true
        ag_ui_enabled: true

opensearchJavaOpts: "-Xms8g -Xmx8g -Dio.netty.allocator.numDirectArenas=1 -Dio.netty.noUnsafe=false -Dio.netty.tryUnsafe=true -Dio.netty.tryReflectionSetAccessible=true -Dopensearch.performanceanalyzer.enabled=false"

resources:
  requests:
    cpu: "4"
    memory: "16Gi"

extraEnvs:
  - name: OPENSEARCH_ADMIN_PASS
    value: <secret:/app/data/demo/internal_users~admin>

plugins:
  enabled: true
  removeList:
    - opensearch-skills
    - opensearch-ml
  installList:
    - https://github.com/yyfamazon/ml-commons/releases/download/caching/opensearch-ml-3.5.0.0-SNAPSHOT.zip
    - https://github.com/Hailong-am/os-build/releases/download/3.5-skills/opensearch-skills-3.5.0.0-SNAPSHOT.zip
    - https://github.com/Hailong-am/os-build/releases/download/3.5-reactor-netty4/transport-reactor-netty4-3.5.0-SNAPSHOT.zip
    - https://github.com/Hailong-am/os-build/releases/download/3.5-flight-rpc/arrow-flight-rpc-3.5.0-SNAPSHOT.zip
